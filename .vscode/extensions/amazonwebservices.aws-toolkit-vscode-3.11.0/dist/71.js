"use strict";exports.id=71,exports.ids=[71],exports.modules={25071:(ut,ue,c)=>{c.d(ue,{CreateTokenCommand:()=>dt,SSOOIDCClient:()=>Me});var M=c(37493),me=c(70183),ye=c(23703),H=c(88610),g=c(50389),x=c(95908),Se=c(89362),V=c(75795),f=c(56971),o=c(27929),ge=c(5243),L=c(95773);const xe=async(e,t,n)=>({operation:(0,L.J)(t).operation,region:await(0,L.$)(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});function ve(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"sso-oauth",region:e.region},propertiesExtractor:(t,n)=>({signingProperties:{config:t,context:n}})}}function _(e){return{schemeId:"smithy.api#noAuth"}}const Ie=e=>{const t=[];switch(e.operation){case"CreateToken":{t.push(_(e));break}case"RegisterClient":{t.push(_(e));break}case"StartDeviceAuthorization":{t.push(_(e));break}default:t.push(ve(e))}return t},Ee=e=>({...(0,ge.K)(e)}),fe=e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"sso-oauth"}),Ce={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}},be={i8:"3.572.0"};var _e=c(42677),Pe=c(91033),Te=c(95640),we=c(87954),v=c(46807),q=c(52759),Re=c(91743),ke=c(88383),Ae=c(57383),Oe=c(53918),B=c(76954),W=c(7242),De=c(99558),J=c(92718);const K="required",l="fn",p="argv",m="ref",X=!0,Z="isSet",I="booleanEquals",y="error",S="endpoint",u="tree",P="PartitionResult",T="getAttr",Q={[K]:!1,type:"String"},ee={[K]:!0,default:!1,type:"Boolean"},te={[m]:"Endpoint"},ne={[l]:I,[p]:[{[m]:"UseFIPS"},!0]},oe={[l]:I,[p]:[{[m]:"UseDualStack"},!0]},h={},se={[l]:T,[p]:[{[m]:P},"supportsFIPS"]},re={[m]:P},ie={[l]:I,[p]:[!0,{[l]:T,[p]:[re,"supportsDualStack"]}]},ce=[ne],ae=[oe],de=[{[m]:"Region"}],$e={version:"1.0",parameters:{Region:Q,UseDualStack:ee,UseFIPS:ee,Endpoint:Q},rules:[{conditions:[{[l]:Z,[p]:[te]}],rules:[{conditions:ce,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:y},{conditions:ae,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:y},{endpoint:{url:te,properties:h,headers:h},type:S}],type:u},{conditions:[{[l]:Z,[p]:de}],rules:[{conditions:[{[l]:"aws.partition",[p]:de,assign:P}],rules:[{conditions:[ne,oe],rules:[{conditions:[{[l]:I,[p]:[X,se]},ie],rules:[{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:h,headers:h},type:S}],type:u},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:y}],type:u},{conditions:ce,rules:[{conditions:[{[l]:I,[p]:[se,X]}],rules:[{conditions:[{[l]:"stringEquals",[p]:[{[l]:T,[p]:[re,"name"]},"aws-us-gov"]}],endpoint:{url:"https://oidc.{Region}.amazonaws.com",properties:h,headers:h},type:S},{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dnsSuffix}",properties:h,headers:h},type:S}],type:u},{error:"FIPS is enabled but this partition does not support FIPS",type:y}],type:u},{conditions:ae,rules:[{conditions:[ie],rules:[{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:h,headers:h},type:S}],type:u},{error:"DualStack is enabled but this partition does not support DualStack",type:y}],type:u},{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dnsSuffix}",properties:h,headers:h},type:S}],type:u}],type:u},{error:"Invalid Configuration: Missing Region",type:y}]},ze=(e,t={})=>(0,J.B1)($e,{endpointParams:e,logger:t.logger});J.DY.aws=De.Iu;const Ue=e=>({apiVersion:"2019-06-10",base64Decoder:e?.base64Decoder??B.G,base64Encoder:e?.base64Encoder??B.s,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??ze,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??Ie,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new Ae.V},{schemeId:"smithy.api#noAuth",identityProvider:t=>t.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new x.oH}],logger:e?.logger??new o.vk,serviceId:e?.serviceId??"SSO OIDC",urlParser:e?.urlParser??Oe.e,utf8Decoder:e?.utf8Decoder??W.$x,utf8Encoder:e?.utf8Encoder??W.GZ});var Ne=c(66918);const je=e=>{(0,o.H_)(process.version);const t=(0,Ne.j)(e),n=()=>t().then(o.jv),s=Ue(e);return(0,_e.H)(process.version),{...s,...e,runtime:"node",defaultsMode:t,bodyLengthChecker:e?.bodyLengthChecker??Re.W,credentialDefaultProvider:e?.credentialDefaultProvider??Pe.iw,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,Te.fV)({serviceId:s.serviceId,clientVersion:be.i8}),maxAttempts:e?.maxAttempts??(0,v.M)(f.NODE_MAX_ATTEMPT_CONFIG_OPTIONS),region:e?.region??(0,v.M)(g._c,g.zb),requestHandler:q.NA.create(e?.requestHandler??n),retryMode:e?.retryMode??(0,v.M)({...f.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await n()).retryMode||ke.DEFAULT_RETRY_MODE}),sha256:e?.sha256??we.k.bind(null,"sha256"),streamCollector:e?.streamCollector??q.CF,useDualstackEndpoint:e?.useDualstackEndpoint??(0,v.M)(g.G7),useFipsEndpoint:e?.useFipsEndpoint??(0,v.M)(g.NL)}};var le=c(94262),pe=c(97781);const Ye=e=>{const t=e.httpAuthSchemes;let n=e.httpAuthSchemeProvider,s=e.credentials;return{setHttpAuthScheme(r){const i=t.findIndex(E=>E.schemeId===r.schemeId);i===-1?t.push(r):t.splice(i,1,r)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(r){n=r},httpAuthSchemeProvider(){return n},setCredentials(r){s=r},credentials(){return s}}},Ge=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()}),C=e=>e,Fe=(e,t)=>{const n={...C((0,le.GW)(e)),...C((0,o.kE)(e)),...C((0,pe.getHttpHandlerExtensionConfiguration)(e)),...C(Ye(e))};return t.forEach(s=>s.configure(n)),{...e,...(0,le.A1)(n),...(0,o.SQ)(n),...(0,pe.resolveHttpHandlerRuntimeConfig)(n),...Ge(n)}};class Me extends o.KU{constructor(...[t]){const n=je(t||{}),s=fe(n),r=(0,g.Xb)(s),i=(0,V.uW)(r),E=(0,f.resolveRetryConfig)(i),lt=(0,M.S8)(E),pt=(0,H.er)(lt),ht=Ee(pt),he=Fe(ht,t?.extensions||[]);super(he),this.config=he,this.middlewareStack.use((0,f.getRetryPlugin)(this.config)),this.middlewareStack.use((0,Se.VG)(this.config)),this.middlewareStack.use((0,M.G2)(this.config)),this.middlewareStack.use((0,me.cV)(this.config)),this.middlewareStack.use((0,ye.eV)(this.config)),this.middlewareStack.use((0,H.XJ)(this.config)),this.middlewareStack.use((0,x.tZ)(this.config,{httpAuthSchemeParametersProvider:this.getDefaultHttpAuthSchemeParametersProvider(),identityProviderConfigProvider:this.getIdentityProviderConfigProvider()})),this.middlewareStack.use((0,x.aZ)(this.config))}destroy(){super.destroy()}getDefaultHttpAuthSchemeParametersProvider(){return xe}getIdentityProviderConfigProvider(){return async t=>new x.K5({"aws.auth#sigv4":t.credentials})}}var He=c(43080);class d extends o.sI{constructor(t){super(t),Object.setPrototypeOf(this,d.prototype)}}class w extends d{constructor(t){super({name:"AccessDeniedException",$fault:"client",...t}),this.name="AccessDeniedException",this.$fault="client",Object.setPrototypeOf(this,w.prototype),this.error=t.error,this.error_description=t.error_description}}class R extends d{constructor(t){super({name:"AuthorizationPendingException",$fault:"client",...t}),this.name="AuthorizationPendingException",this.$fault="client",Object.setPrototypeOf(this,R.prototype),this.error=t.error,this.error_description=t.error_description}}class k extends d{constructor(t){super({name:"ExpiredTokenException",$fault:"client",...t}),this.name="ExpiredTokenException",this.$fault="client",Object.setPrototypeOf(this,k.prototype),this.error=t.error,this.error_description=t.error_description}}class A extends d{constructor(t){super({name:"InternalServerException",$fault:"server",...t}),this.name="InternalServerException",this.$fault="server",Object.setPrototypeOf(this,A.prototype),this.error=t.error,this.error_description=t.error_description}}class O extends d{constructor(t){super({name:"InvalidClientException",$fault:"client",...t}),this.name="InvalidClientException",this.$fault="client",Object.setPrototypeOf(this,O.prototype),this.error=t.error,this.error_description=t.error_description}}class D extends d{constructor(t){super({name:"InvalidGrantException",$fault:"client",...t}),this.name="InvalidGrantException",this.$fault="client",Object.setPrototypeOf(this,D.prototype),this.error=t.error,this.error_description=t.error_description}}class $ extends d{constructor(t){super({name:"InvalidRequestException",$fault:"client",...t}),this.name="InvalidRequestException",this.$fault="client",Object.setPrototypeOf(this,$.prototype),this.error=t.error,this.error_description=t.error_description}}class z extends d{constructor(t){super({name:"InvalidScopeException",$fault:"client",...t}),this.name="InvalidScopeException",this.$fault="client",Object.setPrototypeOf(this,z.prototype),this.error=t.error,this.error_description=t.error_description}}class U extends d{constructor(t){super({name:"SlowDownException",$fault:"client",...t}),this.name="SlowDownException",this.$fault="client",Object.setPrototypeOf(this,U.prototype),this.error=t.error,this.error_description=t.error_description}}class N extends d{constructor(t){super({name:"UnauthorizedClientException",$fault:"client",...t}),this.name="UnauthorizedClientException",this.$fault="client",Object.setPrototypeOf(this,N.prototype),this.error=t.error,this.error_description=t.error_description}}class j extends d{constructor(t){super({name:"UnsupportedGrantTypeException",$fault:"client",...t}),this.name="UnsupportedGrantTypeException",this.$fault="client",Object.setPrototypeOf(this,j.prototype),this.error=t.error,this.error_description=t.error_description}}class Y extends d{constructor(t){super({name:"InvalidRequestRegionException",$fault:"client",...t}),this.name="InvalidRequestRegionException",this.$fault="client",Object.setPrototypeOf(this,Y.prototype),this.error=t.error,this.error_description=t.error_description,this.endpoint=t.endpoint,this.region=t.region}}class G extends d{constructor(t){super({name:"InvalidClientMetadataException",$fault:"client",...t}),this.name="InvalidClientMetadataException",this.$fault="client",Object.setPrototypeOf(this,G.prototype),this.error=t.error,this.error_description=t.error_description}}const Ve=e=>({...e,...e.clientSecret&&{clientSecret:o.oc},...e.refreshToken&&{refreshToken:o.oc}}),Le=e=>({...e,...e.accessToken&&{accessToken:o.oc},...e.refreshToken&&{refreshToken:o.oc},...e.idToken&&{idToken:o.oc}}),yt=e=>({...e,...e.refreshToken&&{refreshToken:SENSITIVE_STRING},...e.assertion&&{assertion:SENSITIVE_STRING},...e.subjectToken&&{subjectToken:SENSITIVE_STRING}}),St=e=>({...e,...e.accessToken&&{accessToken:SENSITIVE_STRING},...e.refreshToken&&{refreshToken:SENSITIVE_STRING},...e.idToken&&{idToken:SENSITIVE_STRING}}),gt=e=>({...e,...e.clientSecret&&{clientSecret:SENSITIVE_STRING}}),xt=e=>({...e,...e.clientSecret&&{clientSecret:SENSITIVE_STRING}});var F=c(87348);const qe=async(e,t)=>{const n=(0,x.cu)(e,t),s={"content-type":"application/json"};n.bp("/token");let r;return r=JSON.stringify((0,o.qn)(e,{clientId:[],clientSecret:[],code:[],deviceCode:[],grantType:[],redirectUri:[],refreshToken:[],scope:i=>(0,o.F3)(i)})),n.m("POST").h(s).b(r),n.build()},vt=async(e,t)=>{const n=rb(e,t),s={"content-type":"application/json"};n.bp("/token");const r=map({[at]:[,"t"]});let i;return i=JSON.stringify(take(e,{assertion:[],clientId:[],code:[],grantType:[],redirectUri:[],refreshToken:[],requestedTokenType:[],scope:E=>_json(E),subjectToken:[],subjectTokenType:[]})),n.m("POST").h(s).q(r).b(i),n.build()},It=async(e,t)=>{const n=rb(e,t),s={"content-type":"application/json"};n.bp("/client/register");let r;return r=JSON.stringify(take(e,{clientName:[],clientType:[],scopes:i=>_json(i)})),n.m("POST").h(s).b(r),n.build()},Et=async(e,t)=>{const n=rb(e,t),s={"content-type":"application/json"};n.bp("/device_authorization");let r;return r=JSON.stringify(take(e,{clientId:[],clientSecret:[],startUrl:[]})),n.m("POST").h(s).b(r),n.build()},Be=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return b(e,t);const n=(0,o.UI)({$metadata:a(e)}),s=(0,o.CE)((0,o.Wh)(await(0,F.e1)(e.body,t)),"body"),r=(0,o.qn)(s,{accessToken:o.pY,expiresIn:o.u$,idToken:o.pY,refreshToken:o.pY,tokenType:o.pY});return Object.assign(n,r),n},ft=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return b(e,t);const n=map({$metadata:a(e)}),s=__expectNonNull(__expectObject(await parseBody(e.body,t)),"body"),r=take(s,{accessToken:__expectString,expiresIn:__expectInt32,idToken:__expectString,issuedTokenType:__expectString,refreshToken:__expectString,scope:_json,tokenType:__expectString});return Object.assign(n,r),n},Ct=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return b(e,t);const n=map({$metadata:a(e)}),s=__expectNonNull(__expectObject(await parseBody(e.body,t)),"body"),r=take(s,{authorizationEndpoint:__expectString,clientId:__expectString,clientIdIssuedAt:__expectLong,clientSecret:__expectString,clientSecretExpiresAt:__expectLong,tokenEndpoint:__expectString});return Object.assign(n,r),n},bt=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return b(e,t);const n=map({$metadata:a(e)}),s=__expectNonNull(__expectObject(await parseBody(e.body,t)),"body"),r=take(s,{deviceCode:__expectString,expiresIn:__expectInt32,interval:__expectInt32,userCode:__expectString,verificationUri:__expectString,verificationUriComplete:__expectString});return Object.assign(n,r),n},b=async(e,t)=>{const n={...e,body:await(0,F.fk)(e.body,t)},s=(0,F.mJ)(e,n.body);switch(s){case"AccessDeniedException":case"com.amazonaws.ssooidc#AccessDeniedException":throw await Je(n,t);case"AuthorizationPendingException":case"com.amazonaws.ssooidc#AuthorizationPendingException":throw await Ke(n,t);case"ExpiredTokenException":case"com.amazonaws.ssooidc#ExpiredTokenException":throw await Xe(n,t);case"InternalServerException":case"com.amazonaws.ssooidc#InternalServerException":throw await Ze(n,t);case"InvalidClientException":case"com.amazonaws.ssooidc#InvalidClientException":throw await Qe(n,t);case"InvalidGrantException":case"com.amazonaws.ssooidc#InvalidGrantException":throw await tt(n,t);case"InvalidRequestException":case"com.amazonaws.ssooidc#InvalidRequestException":throw await nt(n,t);case"InvalidScopeException":case"com.amazonaws.ssooidc#InvalidScopeException":throw await st(n,t);case"SlowDownException":case"com.amazonaws.ssooidc#SlowDownException":throw await rt(n,t);case"UnauthorizedClientException":case"com.amazonaws.ssooidc#UnauthorizedClientException":throw await it(n,t);case"UnsupportedGrantTypeException":case"com.amazonaws.ssooidc#UnsupportedGrantTypeException":throw await ct(n,t);case"InvalidRequestRegionException":case"com.amazonaws.ssooidc#InvalidRequestRegionException":throw await ot(n,t);case"InvalidClientMetadataException":case"com.amazonaws.ssooidc#InvalidClientMetadataException":throw await et(n,t);default:const r=n.body;return We({output:e,parsedBody:r,errorCode:s})}},We=(0,o.PC)(d),Je=async(e,t)=>{const n=(0,o.UI)({}),s=e.body,r=(0,o.qn)(s,{error:o.pY,error_description:o.pY});Object.assign(n,r);const i=new w({$metadata:a(e),...n});return(0,o.to)(i,e.body)},Ke=async(e,t)=>{const n=(0,o.UI)({}),s=e.body,r=(0,o.qn)(s,{error:o.pY,error_description:o.pY});Object.assign(n,r);const i=new R({$metadata:a(e),...n});return(0,o.to)(i,e.body)},Xe=async(e,t)=>{const n=(0,o.UI)({}),s=e.body,r=(0,o.qn)(s,{error:o.pY,error_description:o.pY});Object.assign(n,r);const i=new k({$metadata:a(e),...n});return(0,o.to)(i,e.body)},Ze=async(e,t)=>{const n=(0,o.UI)({}),s=e.body,r=(0,o.qn)(s,{error:o.pY,error_description:o.pY});Object.assign(n,r);const i=new A({$metadata:a(e),...n});return(0,o.to)(i,e.body)},Qe=async(e,t)=>{const n=(0,o.UI)({}),s=e.body,r=(0,o.qn)(s,{error:o.pY,error_description:o.pY});Object.assign(n,r);const i=new O({$metadata:a(e),...n});return(0,o.to)(i,e.body)},et=async(e,t)=>{const n=(0,o.UI)({}),s=e.body,r=(0,o.qn)(s,{error:o.pY,error_description:o.pY});Object.assign(n,r);const i=new G({$metadata:a(e),...n});return(0,o.to)(i,e.body)},tt=async(e,t)=>{const n=(0,o.UI)({}),s=e.body,r=(0,o.qn)(s,{error:o.pY,error_description:o.pY});Object.assign(n,r);const i=new D({$metadata:a(e),...n});return(0,o.to)(i,e.body)},nt=async(e,t)=>{const n=(0,o.UI)({}),s=e.body,r=(0,o.qn)(s,{error:o.pY,error_description:o.pY});Object.assign(n,r);const i=new $({$metadata:a(e),...n});return(0,o.to)(i,e.body)},ot=async(e,t)=>{const n=(0,o.UI)({}),s=e.body,r=(0,o.qn)(s,{endpoint:o.pY,error:o.pY,error_description:o.pY,region:o.pY});Object.assign(n,r);const i=new Y({$metadata:a(e),...n});return(0,o.to)(i,e.body)},st=async(e,t)=>{const n=(0,o.UI)({}),s=e.body,r=(0,o.qn)(s,{error:o.pY,error_description:o.pY});Object.assign(n,r);const i=new z({$metadata:a(e),...n});return(0,o.to)(i,e.body)},rt=async(e,t)=>{const n=(0,o.UI)({}),s=e.body,r=(0,o.qn)(s,{error:o.pY,error_description:o.pY});Object.assign(n,r);const i=new U({$metadata:a(e),...n});return(0,o.to)(i,e.body)},it=async(e,t)=>{const n=(0,o.UI)({}),s=e.body,r=(0,o.qn)(s,{error:o.pY,error_description:o.pY});Object.assign(n,r);const i=new N({$metadata:a(e),...n});return(0,o.to)(i,e.body)},ct=async(e,t)=>{const n=(0,o.UI)({}),s=e.body,r=(0,o.qn)(s,{error:o.pY,error_description:o.pY});Object.assign(n,r);const i=new j({$metadata:a(e),...n});return(0,o.to)(i,e.body)},a=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),_t=(e,t)=>collectBody(e,t).then(n=>t.utf8Encoder(n)),Pt=e=>e!=null&&e!==""&&(!Object.getOwnPropertyNames(e).includes("length")||e.length!=0)&&(!Object.getOwnPropertyNames(e).includes("size")||e.size!=0),at="aws_iam";class dt extends o.mY.classBuilder().ep({...Ce}).m(function(t,n,s,r){return[(0,He.p2)(s,this.serialize,this.deserialize),(0,V.a3)(s,t.getEndpointParameterInstructions())]}).s("AWSSSOOIDCService","CreateToken",{}).n("SSOOIDCClient","CreateTokenCommand").f(Ve,Le).ser(qe).de(Be).build(){}}};
