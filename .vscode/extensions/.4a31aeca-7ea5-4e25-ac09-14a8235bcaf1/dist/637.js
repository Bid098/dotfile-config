"use strict";exports.id=637,exports.ids=[637],exports.modules={73637:(rt,pe,a)=>{a.d(pe,{GetRoleCredentialsCommand:()=>we,SSOClient:()=>tt});var L=a(75795),me=a(43080),n=a(27929);const ye=e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"awsssoportal"}),ge={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}};class p extends n.sI{constructor(t){super(t),Object.setPrototypeOf(this,p.prototype)}}class T extends p{constructor(t){super({name:"InvalidRequestException",$fault:"client",...t}),this.name="InvalidRequestException",this.$fault="client",Object.setPrototypeOf(this,T.prototype)}}class w extends p{constructor(t){super({name:"ResourceNotFoundException",$fault:"client",...t}),this.name="ResourceNotFoundException",this.$fault="client",Object.setPrototypeOf(this,w.prototype)}}class O extends p{constructor(t){super({name:"TooManyRequestsException",$fault:"client",...t}),this.name="TooManyRequestsException",this.$fault="client",Object.setPrototypeOf(this,O.prototype)}}class N extends p{constructor(t){super({name:"UnauthorizedException",$fault:"client",...t}),this.name="UnauthorizedException",this.$fault="client",Object.setPrototypeOf(this,N.prototype)}}const Se=e=>({...e,...e.accessToken&&{accessToken:n.oc}}),ve=e=>({...e,...e.secretAccessKey&&{secretAccessKey:n.oc},...e.sessionToken&&{sessionToken:n.oc}}),fe=e=>({...e,...e.roleCredentials&&{roleCredentials:ve(e.roleCredentials)}}),at=e=>({...e,...e.accessToken&&{accessToken:SENSITIVE_STRING}}),it=e=>({...e,...e.accessToken&&{accessToken:SENSITIVE_STRING}}),dt=e=>({...e,...e.accessToken&&{accessToken:SENSITIVE_STRING}});var F=a(87348),S=a(95908);const xe=async(e,t)=>{const s=(0,S.cu)(e,t),o=(0,n.UI)({},R,{[I]:e[P]});s.bp("/federation/credentials");const r=(0,n.UI)({[Te]:[,(0,n.CE)(e[Ae],"roleName")],[G]:[,(0,n.CE)(e[z],"accountId")]});let i;return s.m("GET").h(o).q(r).b(i),s.build()},ct=async(e,t)=>{const s=rb(e,t),o=map({},R,{[I]:e[P]});s.bp("/assignment/roles");const r=map({[$]:[,e[M]],[U]:[()=>e.maxResults!==void 0,()=>e[H].toString()],[G]:[,__expectNonNull(e[z],"accountId")]});let i;return s.m("GET").h(o).q(r).b(i),s.build()},lt=async(e,t)=>{const s=rb(e,t),o=map({},R,{[I]:e[P]});s.bp("/assignment/accounts");const r=map({[$]:[,e[M]],[U]:[()=>e.maxResults!==void 0,()=>e[H].toString()]});let i;return s.m("GET").h(o).q(r).b(i),s.build()},ut=async(e,t)=>{const s=rb(e,t),o=map({},R,{[I]:e[P]});s.bp("/logout");let r;return s.m("POST").h(o).b(r),s.build()},Ee=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return E(e,t);const s=(0,n.UI)({$metadata:h(e)}),o=(0,n.CE)((0,n.Wh)(await(0,F.e1)(e.body,t)),"body"),r=(0,n.qn)(o,{roleCredentials:n.F3});return Object.assign(s,r),s},ht=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return E(e,t);const s=map({$metadata:h(e)}),o=__expectNonNull(__expectObject(await parseBody(e.body,t)),"body"),r=take(o,{nextToken:__expectString,roleList:_json});return Object.assign(s,r),s},pt=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return E(e,t);const s=map({$metadata:h(e)}),o=__expectNonNull(__expectObject(await parseBody(e.body,t)),"body"),r=take(o,{accountList:_json,nextToken:__expectString});return Object.assign(s,r),s},mt=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return E(e,t);const s=map({$metadata:h(e)});return await collectBody(e.body,t),s},E=async(e,t)=>{const s={...e,body:await(0,F.fk)(e.body,t)},o=(0,F.mJ)(e,s.body);switch(o){case"InvalidRequestException":case"com.amazonaws.sso#InvalidRequestException":throw await Pe(s,t);case"ResourceNotFoundException":case"com.amazonaws.sso#ResourceNotFoundException":throw await Ie(s,t);case"TooManyRequestsException":case"com.amazonaws.sso#TooManyRequestsException":throw await Ce(s,t);case"UnauthorizedException":case"com.amazonaws.sso#UnauthorizedException":throw await be(s,t);default:const r=s.body;return Re({output:e,parsedBody:r,errorCode:o})}},Re=(0,n.PC)(p),Pe=async(e,t)=>{const s=(0,n.UI)({}),o=e.body,r=(0,n.qn)(o,{message:n.pY});Object.assign(s,r);const i=new T({$metadata:h(e),...s});return(0,n.to)(i,e.body)},Ie=async(e,t)=>{const s=(0,n.UI)({}),o=e.body,r=(0,n.qn)(o,{message:n.pY});Object.assign(s,r);const i=new w({$metadata:h(e),...s});return(0,n.to)(i,e.body)},Ce=async(e,t)=>{const s=(0,n.UI)({}),o=e.body,r=(0,n.qn)(o,{message:n.pY});Object.assign(s,r);const i=new O({$metadata:h(e),...s});return(0,n.to)(i,e.body)},be=async(e,t)=>{const s=(0,n.UI)({}),o=e.body,r=(0,n.qn)(o,{message:n.pY});Object.assign(s,r);const i=new N({$metadata:h(e),...s});return(0,n.to)(i,e.body)},h=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),yt=(e,t)=>collectBody(e,t).then(s=>t.utf8Encoder(s)),R=e=>e!=null&&e!==""&&(!Object.getOwnPropertyNames(e).includes("length")||e.length!=0)&&(!Object.getOwnPropertyNames(e).includes("size")||e.size!=0),z="accountId",P="accessToken",G="account_id",H="maxResults",U="max_result",M="nextToken",$="next_token",Ae="roleName",Te="role_name",I="x-amz-sso_bearer_token";class we extends n.mY.classBuilder().ep({...ge}).m(function(t,s,o,r){return[(0,me.p2)(o,this.serialize,this.deserialize),(0,L.a3)(o,t.getEndpointParameterInstructions())]}).s("SWBPortalService","GetRoleCredentials",{}).n("SSOClient","GetRoleCredentialsCommand").f(Se,fe).ser(xe).de(Ee).build(){}var V=a(37493),Oe=a(70183),Ne=a(23703),j=a(88610),v=a(50389),Fe=a(89362),C=a(56971),De=a(5243),B=a(95773);const ke=async(e,t,s)=>({operation:(0,B.J)(t).operation,region:await(0,B.$)(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});function _e(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"awsssoportal",region:e.region},propertiesExtractor:(t,s)=>({signingProperties:{config:t,context:s}})}}function b(e){return{schemeId:"smithy.api#noAuth"}}const Le=e=>{const t=[];switch(e.operation){case"GetRoleCredentials":{t.push(b(e));break}case"ListAccountRoles":{t.push(b(e));break}case"ListAccounts":{t.push(b(e));break}case"Logout":{t.push(b(e));break}default:t.push(_e(e))}return t},ze=e=>({...(0,De.K)(e)}),Ge={i8:"3.572.0"};var He=a(42677),Ue=a(95640),Me=a(87954),f=a(46807),Y=a(52759),$e=a(91743),Ve=a(88383),je=a(57383),Be=a(53918),q=a(76954),W=a(7242),Ye=a(99558),K=a(92718);const J="required",d="fn",c="argv",m="ref",X=!0,Z="isSet",x="booleanEquals",y="error",g="endpoint",u="tree",D="PartitionResult",k="getAttr",Q={[J]:!1,type:"String"},ee={[J]:!0,default:!1,type:"Boolean"},te={[m]:"Endpoint"},se={[d]:x,[c]:[{[m]:"UseFIPS"},!0]},ne={[d]:x,[c]:[{[m]:"UseDualStack"},!0]},l={},oe={[d]:k,[c]:[{[m]:D},"supportsFIPS"]},re={[m]:D},ae={[d]:x,[c]:[!0,{[d]:k,[c]:[re,"supportsDualStack"]}]},ie=[se],de=[ne],ce=[{[m]:"Region"}],qe={version:"1.0",parameters:{Region:Q,UseDualStack:ee,UseFIPS:ee,Endpoint:Q},rules:[{conditions:[{[d]:Z,[c]:[te]}],rules:[{conditions:ie,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:y},{conditions:de,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:y},{endpoint:{url:te,properties:l,headers:l},type:g}],type:u},{conditions:[{[d]:Z,[c]:ce}],rules:[{conditions:[{[d]:"aws.partition",[c]:ce,assign:D}],rules:[{conditions:[se,ne],rules:[{conditions:[{[d]:x,[c]:[X,oe]},ae],rules:[{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:l,headers:l},type:g}],type:u},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:y}],type:u},{conditions:ie,rules:[{conditions:[{[d]:x,[c]:[oe,X]}],rules:[{conditions:[{[d]:"stringEquals",[c]:[{[d]:k,[c]:[re,"name"]},"aws-us-gov"]}],endpoint:{url:"https://portal.sso.{Region}.amazonaws.com",properties:l,headers:l},type:g},{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dnsSuffix}",properties:l,headers:l},type:g}],type:u},{error:"FIPS is enabled but this partition does not support FIPS",type:y}],type:u},{conditions:de,rules:[{conditions:[ae],rules:[{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:l,headers:l},type:g}],type:u},{error:"DualStack is enabled but this partition does not support DualStack",type:y}],type:u},{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dnsSuffix}",properties:l,headers:l},type:g}],type:u}],type:u},{error:"Invalid Configuration: Missing Region",type:y}]},We=(e,t={})=>(0,K.B1)(qe,{endpointParams:e,logger:t.logger});K.DY.aws=Ye.Iu;const Ke=e=>({apiVersion:"2019-06-10",base64Decoder:e?.base64Decoder??q.G,base64Encoder:e?.base64Encoder??q.s,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??We,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??Le,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new je.V},{schemeId:"smithy.api#noAuth",identityProvider:t=>t.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new S.oH}],logger:e?.logger??new n.vk,serviceId:e?.serviceId??"SSO",urlParser:e?.urlParser??Be.e,utf8Decoder:e?.utf8Decoder??W.$x,utf8Encoder:e?.utf8Encoder??W.GZ});var Je=a(66918);const Xe=e=>{(0,n.H_)(process.version);const t=(0,Je.j)(e),s=()=>t().then(n.jv),o=Ke(e);return(0,He.H)(process.version),{...o,...e,runtime:"node",defaultsMode:t,bodyLengthChecker:e?.bodyLengthChecker??$e.W,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,Ue.fV)({serviceId:o.serviceId,clientVersion:Ge.i8}),maxAttempts:e?.maxAttempts??(0,f.M)(C.NODE_MAX_ATTEMPT_CONFIG_OPTIONS),region:e?.region??(0,f.M)(v._c,v.zb),requestHandler:Y.NA.create(e?.requestHandler??s),retryMode:e?.retryMode??(0,f.M)({...C.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await s()).retryMode||Ve.DEFAULT_RETRY_MODE}),sha256:e?.sha256??Me.k.bind(null,"sha256"),streamCollector:e?.streamCollector??Y.CF,useDualstackEndpoint:e?.useDualstackEndpoint??(0,f.M)(v.G7),useFipsEndpoint:e?.useFipsEndpoint??(0,f.M)(v.NL)}};var le=a(94262),ue=a(97781);const Ze=e=>{const t=e.httpAuthSchemes;let s=e.httpAuthSchemeProvider,o=e.credentials;return{setHttpAuthScheme(r){const i=t.findIndex(_=>_.schemeId===r.schemeId);i===-1?t.push(r):t.splice(i,1,r)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(r){s=r},httpAuthSchemeProvider(){return s},setCredentials(r){o=r},credentials(){return o}}},Qe=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()}),A=e=>e,et=(e,t)=>{const s={...A((0,le.GW)(e)),...A((0,n.kE)(e)),...A((0,ue.getHttpHandlerExtensionConfiguration)(e)),...A(Ze(e))};return t.forEach(o=>o.configure(s)),{...e,...(0,le.A1)(s),...(0,n.SQ)(s),...(0,ue.resolveHttpHandlerRuntimeConfig)(s),...Qe(s)}};class tt extends n.KU{constructor(...[t]){const s=Xe(t||{}),o=ye(s),r=(0,v.Xb)(o),i=(0,L.uW)(r),_=(0,C.resolveRetryConfig)(i),st=(0,V.S8)(_),nt=(0,j.er)(st),ot=ze(nt),he=et(ot,t?.extensions||[]);super(he),this.config=he,this.middlewareStack.use((0,C.getRetryPlugin)(this.config)),this.middlewareStack.use((0,Fe.VG)(this.config)),this.middlewareStack.use((0,V.G2)(this.config)),this.middlewareStack.use((0,Oe.cV)(this.config)),this.middlewareStack.use((0,Ne.eV)(this.config)),this.middlewareStack.use((0,j.XJ)(this.config)),this.middlewareStack.use((0,S.tZ)(this.config,{httpAuthSchemeParametersProvider:this.getDefaultHttpAuthSchemeParametersProvider(),identityProviderConfigProvider:this.getIdentityProviderConfigProvider()})),this.middlewareStack.use((0,S.aZ)(this.config))}destroy(){super.destroy()}getDefaultHttpAuthSchemeParametersProvider(){return ke}getIdentityProviderConfigProvider(){return async t=>new S.K5({"aws.auth#sigv4":t.credentials})}}}};
